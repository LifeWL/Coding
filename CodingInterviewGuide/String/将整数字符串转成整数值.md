# 将整数字符串转成整数值

```C++
#include <iostream>
#include <vector>
#include <string>

using namespace std;

bool isvalid(string str) {
    if (str.empty()) {
        return false;
    }
    if (str[0] == '0' && str.size() > 1) {
        return false;
    }
    if (str[0] == '-' && str.size() == 1) {
        return false;
    }
    if (str.size() > 1 && str[0] == '-' && str[1] == '0') {
        return false;
    }
    for (int i = (str[0] == '-' ? 1:0); i < str.size(); ++i) {
        if (str[i] < '0' || str[i] > '9') {
            return false;
        }
    }
    return true;
}

int trans_num(const string &str) {
    if (isvalid(str) == false) {
        return 0;
    }
    int flag = 0;
    if (str[0] == '-') {
        flag = 1;
    }
    long res = 0;
    for (int i = (str[i] == '-' ? 1 : 0); i < str.size(); ++i) {
        res = res * 10 + str[i] - '0';
        if (res > 2147483648) { // res > 2^32
            return 0;
        }
    }
    if (flag == 1) {
        res = res * -1;
    } else if (res == 2147483648) {
        return 0;
    }
    return res;
}

int main() {
    string str;
    cin >> str;
    cout << trans_num(str);
}
```


# **字典树的实现**

```C++
#include<bits/stdc++.h>
using namespace std;
class TrieNode{
    public:
    int path = 0;
    int end = 0;
    TrieNode *map[26] = {NULL};
};
TrieNode *root = new TrieNode();
void myInsert(string word){
    if(word.empty()){
        return ;
    }
    TrieNode *node = root;
    node -> path ++;
    int idx = 0;
    for(int i = 0; i < word.length(); i ++){
        idx = word[i] - 'a';
        if(node -> map[idx] == NULL){
            node -> map[idx] = new TrieNode();
        }
        node = node -> map[idx];
        node -> path ++;
    }
    node -> end ++;
}
bool mySearch(string word){
    if(word.empty()){
        return false;
    }
    TrieNode* node = root;
    int idx = 0;
    for(int i = 0; i < word.length(); i ++){
        idx = word[i] - 'a';
        if(node -> map[idx] == NULL){
            return false;
        }
        node = node -> map[idx];
    }
    return node -> end != 0;
}
void myDelete(string word){
    if(mySearch(word)){
        TrieNode* node = root;
        node -> path ++;
        int idx = 0;
        for(int i = 0; i < word.length(); i ++){
            idx = word[i] - 'a';
            if(-- node -> map[idx] -> path == 0){
                node -> map[idx] = NULL;
                return ;
            }
            node = node -> map[idx];
        }
        node -> end --;
    }
}
int prefixNumber(string pre){
    if(pre.empty()){
        return 0;
    }
    TrieNode* node = root;
    int idx = 0;
    for(int i = 0; i < pre.length(); i ++){
        idx = pre[i] - 'a';
        if(node -> map[idx] == NULL){
            return 0;
        }
        node = node -> map[idx];
    }
    return node -> path;
}
int main(){
    int m;
    cin >> m;
    while(m --){
        int op;
        cin >> op;
        if (op == 1) {
            string word;
            cin >> word;
            myInsert(word);
        }
        if (op == 2) {
            string word;
            cin >> word;
            myDelete(word);
        }
        if (op == 3) {
            string word;
            cin >> word;
            bool res = mySearch(word);
            cout << (res ? "YES" : "NO") << endl;
        }
        if (op == 4) {
            string word;
            cin >> word;
            int res = prefixNumber(word);
            cout << res << endl;
        }
    }
    return 0;
}
```


# 判断二叉树是否为平衡二叉树

```c++
#include <cstdio>
#include <cmath>
#include <algorithm>

using namespace std;

const int N = 500010;

struct BST {
    int lch, rch;
} bst[N];

int n, rt;
int fa, lch, rch;

int get_height(int root, int dep, bool& flag) {
    if (!root) return dep;
    int left = get_height(bst[root].lch, dep + 1, flag);
    if (!flag) return dep;
    int right = get_height(bst[root].rch, dep + 1, flag);
    if (!flag) return dep;
    if (abs(left - right) > 1) flag = false;
    return max(left, right);
}

bool is_balance() {
    bool flag = true;
    get_height(rt, 1, flag);
    return flag;
}

int main(void) {
    scanf("%d%d", &n, &rt);
    while (n--) {
        scanf("%d%d%d", &fa, &lch, &rch);
        bst[fa].lch = lch;
        bst[fa].rch = rch;
    }
    puts(is_balance() ? "true" : "false");
    return 0;
}
```

